---
- name: Core shell
  hosts: localhost
  connection: local
  vars:
    is_mac: "{{ ansible_facts['os_family'] == 'Darwin' }}"
  tasks:
    - name: Linking zshrc
      file:
        src: "~/.dotfiles/modules/zsh/zshrc.sh"
        dest: "~/.zshrc"
        state: link
        force: yes

    - name: Linking zprofile
      file:
        src: "~/.dotfiles/modules/zsh/zprofile.sh"
        dest: "~/.zprofile"
        state: link
        force: yes

    - name: Update oh-my-zsh
      git:
        depth: 1
        dest: "~/.oh-my-zsh"
        force: yes
        repo: "https://github.com/ohmyzsh/ohmyzsh"

    - name: Installing fzf-tab
      git:
        depth: 1
        dest: "~/.dotfiles/modules/zsh/oh-my-zsh/plugins/fzf-tab"
        force: yes
        repo: "https://github.com/Aloxaf/fzf-tab"
    
    - name: Installing starship
      script: /bin/sh -c "$(curl -fsSL https://starship.rs/install.sh)" -- --yes
      args:
        creates: /usr/local/bin/starship
